<!-- src/app/reset-password/reset-password.component.html -->
<div class="auth-container">
  <div class="auth-card">

    <!-- Vérification du token en cours -->
    <div *ngIf="!tokenVerified" class="loading-box">
      <div class="loading-icon">
        <i class="fas fa-spinner fa-spin"></i>
      </div>
      <p>Vérification du lien...</p>
    </div>

    <!-- Token invalide -->
    <div *ngIf="tokenVerified && !tokenValid" class="error-box">
      <div class="error-icon">
        <i class="fas fa-times-circle"></i>
      </div>
      <h2>Lien invalide ou expiré</h2>
      <p class="error-text">{{ errorMessage }}</p>
      <p class="info-text">
        Le lien de réinitialisation a peut-être expiré ou a déjà été utilisé.
      </p>
      <button type="button" class="btn-primary" routerLink="/forgot-password">
        Demander un nouveau lien
      </button>
      <div class="footer-link">
        <a routerLink="/login">Retour à la connexion</a>
      </div>
    </div>

    <!-- Formulaire de réinitialisation -->
    <div *ngIf="tokenVerified && tokenValid && !passwordReset">
      <div class="header-icon">
        <i class="fas fa-lock"></i>
      </div>

      <h2>Nouveau mot de passe</h2>
      <p class="subtitle">Créez un nouveau mot de passe sécurisé pour <strong>{{ email }}</strong></p>

      <form (ngSubmit)="resetPassword()">
        <div class="form-group">
          <label for="newPassword">Nouveau mot de passe *</label>
          <input 
            type="password" 
            id="newPassword" 
            [(ngModel)]="newPassword" 
            name="newPassword" 
            placeholder="••••••••" 
            required
            autofocus>
          <small>Minimum 6 caractères</small>
        </div>

        <div class="form-group">
          <label for="confirmPassword">Confirmer le mot de passe *</label>
          <input 
            type="password" 
            id="confirmPassword" 
            [(ngModel)]="confirmPassword" 
            name="confirmPassword" 
            placeholder="••••••••" 
            required>
        </div>

        <div class="error-message" *ngIf="errorMessage">
          {{ errorMessage }}
        </div>

        <button type="submit" class="btn-primary" [disabled]="isLoading">
          <span *ngIf="!isLoading">Réinitialiser le mot de passe</span>
          <span *ngIf="isLoading"><i class="fas fa-spinner fa-spin"></i> Réinitialisation...</span>
        </button>
      </form>
    </div>

    <!-- Succès -->
    <div *ngIf="passwordReset" class="success-box">
      <div class="success-icon">
        <i class="fas fa-check-circle"></i>
      </div>
      <h2>Mot de passe réinitialisé !</h2>
      <p class="success-message">
        Votre mot de passe a été modifié avec succès.
      </p>
      <p class="info-text">
        Vous allez être redirigé vers la page de connexion...
      </p>
      <button type="button" class="btn-primary" (click)="goToLogin()">
        Se connecter maintenant
      </button>
    </div>

  </div>
</div>